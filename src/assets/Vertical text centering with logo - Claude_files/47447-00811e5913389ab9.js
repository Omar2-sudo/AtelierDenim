try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6239ba51-426e-4539-9fea-393c57ff0c95",e._sentryDebugIdIdentifier="sentry-dbid-6239ba51-426e-4539-9fea-393c57ff0c95")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47447],{7611305:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(0xfc89b4a4);function r(e,t){let n=(0,a.useRef)(e),r=(0,a.useRef)(t),s=(0,a.useRef)(0),i=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{n.current=e},[e]),(0,a.useEffect)(()=>{r.current=t},[t]),(0,a.useEffect)(()=>{s.current=0;let e=r.current(0);return s.current=1,null!==e&&(i.current=setTimeout(function e(){n.current();let t=r.current(s.current);s.current++,null!==t&&(i.current=setTimeout(e,t))},e)),()=>{void 0!==i.current&&clearTimeout(i.current)}},[])}},0x12bfc937:(e,t,n)=>{n.d(t,{G:()=>y,S:()=>w});var a=n(0x164c6313f),r=n(0x20805e624),s=n(0x2349cee20),i=n(0xe670e093),l=n(0xfc89b4a4),o=n(0x17e7bc007),u=n(0xe48b09ae),c=n(0x14de19ae8),d=n(0xcdefe954),f=n(0x1016c6ed2),m=n(0x9845e38c),v=n(0x16a879d4a);function x(e){let t={};for(let[n,a]of Object.entries(e))void 0!==a&&(null===a||"object"!=typeof a?t[n]=a:Array.isArray(a)?t[n]=a.map(e=>"object"!=typeof e||null===e||Array.isArray(e)?e:x(e)):t[n]=x(a));return t}function g(e){return"integration_name"in e&&e.integration_name?(0,v.v)(d.WK,{toolVariant:{case:"frontendRemoteMcpTool",value:(0,v.v)(d.Ky,{name:e.name,description:e.description,inputSchema:x(e.input_schema),namespacedName:"",mcpServerUuid:"mcp_server_uuid"in e?e.mcp_server_uuid:void 0,integrationName:e.integration_name,integrationIconUrl:"integration_icon_url"in e?e.integration_icon_url:void 0,needsApproval:"needs_approval"in e?e.needs_approval:void 0,backendExecution:"backend_execution"in e?e.backend_execution:void 0})}}):"type"in e&&!("input_schema"in e)?(0,v.v)(d.WK,{toolVariant:{case:"anthropicTool",value:(0,v.v)(d.a3,{type:e.type,name:e.name})}}):"input_schema"in e&&"description"in e?(0,v.v)(d.WK,{toolVariant:{case:"claudeAiTool",value:(0,v.v)(d.aA,{name:e.name,description:e.description,inputSchema:x(e.input_schema)})}}):(0,v.v)(d.WK,{toolVariant:{case:"anthropicTool",value:(0,v.v)(d.a3,{type:"name"in e&&e.name?e.name:"unknown",name:e.name})}})}var p=n(0x20885504e);let h=e=>{};function b(e){var t;let n=(0,p.N)(),r=(0,l.useCallback)(t=>(o.oz.getState().pathUuidsByConversation[e.conversationUuid]||[]).includes(t),[e.conversationUuid]),s=(0,l.useCallback)(t=>{let n=o.oz.getState().pathUuidsByConversation[e.conversationUuid]||[],a=n.indexOf(t);return a>=0&&a<n.length-1?n[a+1]:null},[e.conversationUuid]),i=(0,l.useRef)(h),x=(0,o.Q3)(e.conversationUuid),{hasActiveStream:b}=((e,t,n,r)=>{let s=(()=>{let{activeOrganization:e}=(0,c.YL)();if(!e)throw Error("No active organization");return(0,l.useMemo)(()=>(0,a.wV)(e.uuid),[e.uuid])})(),[i,o]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[g,p]=(0,l.useState)(null),h=(0,l.useRef)(null),b=(0,l.useRef)(r);return(0,l.useEffect)(()=>{b.current=r},[r]),(0,l.useEffect)(()=>{if(n)return h.current=new AbortController,(async()=>{try{var n;p(null);let a=s.streamPendingCompletion((0,v.v)(d.mM,{chatConversationUuid:e,parentHumanMessageUuid:t||""}),{signal:null==(n=h.current)?void 0:n.signal});for await(let e of(o(!0),x(!0),a))if("completionEventJson"===e.payload.case)try{let t=JSON.parse(e.payload.value);b.current(t)}catch(e){m.v.error(m.u.CHAT_COMPLETION,"Failed to parse completion event",e)}else if("completionEventError"===e.payload.case){let t=e.payload.value,n={};try{n=JSON.parse(t.errorJson)}catch(e){m.v.error(m.u.CHAT_COMPLETION,"Failed to parse error_json from gRPC error response",e)}throw(0,f.a5)({status:t.statusCode,response:n,fallbackMessage:"HTTP error from private API",headers:void 0,endpoint:"/v1/mobile/streamPendingCompletion",method:"gRPC"})}}catch(e){"not_found"===e.code?x(!1):"AbortError"!==e.name&&(p(e),m.v.error(m.u.CHAT_COMPLETION,"Stream pending completion error",e))}finally{o(!1)}})(),()=>{var e;null==(e=h.current)||e.abort()}},[e,t,s,n]),{isConnected:i,hasActiveStream:u,error:g}})(e.conversationUuid,null==x?void 0:x.uuid,n&&!!e.pendingUserMessage,i.current),y=(0,u.S)({...e,enableCaching:n,...n&&{hasActiveStream:b,checkMessageExists:r,getAssistantMessageUuid:s}});i.current=y.handleEvent;let w=(0,l.useCallback)(async t=>{if(n){let n=e.getTools().map(g);return y.runStream({...t,enableCaching:!0,grpcTools:n})}return y.runStream(t)},[n,e,y]);return{...y,runStream:w,isCachedStreaming:n,isReconnected:null!=(t=y.isReconnected)&&t}}function y(e,t,n,u,c,d,f,m){let v=arguments.length>8&&void 0!==arguments[8]&&arguments[8],x=arguments.length>9?arguments[9]:void 0,{onIncrementalCompletion:g,onStartAppend:p,onStreamCompleted:h}=(0,s.G)(u,c,v),y=(0,o.uQ)(),w=b({conversationUuid:e,projectUuid:t,endpoint:a.ep.APPEND_MESSAGE_WITH_COMPLETION,onIncrementalCompletion:g,onStreamCompleted:h,onConversationReady:m,onMessageStart:x,getTools:n,onRetry:d,pendingUserMessage:f,onStartAppend:p}),{runStream:_}=w,j=(0,l.useCallback)(async t=>{let{prompt:n,attachments:a,files:s,syncSources:l,rethrowErrors:o=!1,modelOverride:u,parent_message_uuid:c,personalized_style:d,compass_mode:f,skipOptimisticUpdateOnStreamComplete:m=!1,createConversationParams:v}=t,x="".concat(r.EL,"-").concat((0,i.b)()),g="".concat(r.B6,"-").concat((0,i.b)()),h=[{uuid:x,content:[{type:"text",text:n,citations:[]}],created_at:new Date().toISOString(),sender:"human",attachments:a,files:s,files_v2:s,sync_sources:l,index:0,parent_message_uuid:null!=c?c:r.gF},{uuid:g,content:[],created_at:new Date().toISOString(),sender:"assistant",attachments:[],files:[],files_v2:[],sync_sources:[],index:0,parent_message_uuid:x,metadata:{compass_mode:f}}];await p(e,e=>{if(!e)throw Error("Conversation tree must be provided for tree append");let t=(0,r.ZQ)(e);return h[0].index=t+1,h[1].index=t+2,(0,r.xQ)(e,h)}),y(e,h),await _({prompt:n,attachments:a,files:s,syncSources:l,rethrowErrors:o,modelOverride:u,parent_message_uuid:c,personalized_style:d,compass_mode:null!=f?f:void 0,skipOptimisticUpdateOnStreamComplete:m,createConversationParams:v})},[_,p,e,y]);return{...w,runStream:j}}function w(e,t,n,u,c,d,f,m){let v=arguments.length>8&&void 0!==arguments[8]&&arguments[8],x=arguments.length>9?arguments[9]:void 0,{onIncrementalCompletion:g,onStreamCompleted:p,onStartAppend:h}=(0,s.G)(c,d,v),y=(0,o.uQ)(),w=b({conversationUuid:e,projectUuid:t,endpoint:a.ep.RETRY_MESSAGE_WITH_COMPLETION,onIncrementalCompletion:g,onStreamCompleted:p,onMessageStart:x,getTools:n,onRetry:f,pendingUserMessage:m,onStartAppend:h}),{runStream:_}=w,j=(0,l.useCallback)(async(t,n,a,s)=>{let l=[{uuid:"".concat(r.B6,"-").concat((0,i.b)()),content:[],created_at:new Date().toISOString(),sender:"assistant",attachments:[],files:[],files_v2:[],sync_sources:[],parent_message_uuid:t,selectedOption:0,index:0}];await h(e,e=>(l[0].index=(0,r.ZQ)(e)+1,(0,r.xQ)(e,l))),y(e,l),await _({prompt:"",attachments:[],files:[],syncSources:[],parent_message_uuid:t,personalized_style:u,paprika_mode:null!=n?n:void 0,compass_mode:null!=a?a:void 0,isRetry:!0,modelOverride:s})},[e,_,h,u,y]);return{...w,runStream:j}}},0x6d73dff2:(e,t,n)=>{n.d(t,{B$:()=>d,JV:()=>c,Nu:()=>o,gI:()=>u});var a=n(0x14de19ae8),r=n(0x1cc2a1724);n(0x17e7bc007);var s=n(0xac309a83),i=n(0x78b33fbd);n(0xfc89b4a4);var l=n(0x1ab0d1ca1);let o=()=>(0,i.useDynamicConfig)("clint_activeinterview").get("activeInterview",void 0),u=()=>{let e=(0,s.fS)("clint_enabled"),{account:t,activeOrganization:n}=(0,a.YL)(),l=(()=>{let e=o(),t=(0,i.useDynamicConfig)("clint_config");if(e)return t.get(e,void 0)})(),u=null==l?void 0:l.end_date,c=(0,s.fS)("clint_allow_all_orgs");return e&&l&&(0,r.gq)(t,n,c)&&!(0,r.oG)(u)};function c(){let e=(0,l.A)(),t=o(),n={clint_v0:e.formatMessage({defaultMessage:"Hello!\n\nI'm an AI interviewer from Anthropic conducting research on how people (like you!) envision AI fitting into their lives, both now and in the future. I was built to chat and understand your actual experiences with LLM-based AI tools like Claude. Yes, I'm an AI asking about AI. A bit self-referential! But that's exactly why your human perspective is valuable.\n\nThis will take about 10-15 minutes. If it's accessible on your device, feel free to use voice dictation instead of typing. I'll ask about your vision for AI's role in your life, and what experiences, values, and needs shape that vision.\n\nI'm also curious about moments where AI has felt helpful (or hasn't), and any concerns you have about how AI might develop. Please don't share anything private such as health details, personal information, or identifiable information about others. Your responses will help shape how we think about AI in everyday life.\n\nSound good?",id:"mJhPdClyU/"})};return t?n[t]:""}function d(){let e=(0,l.A)(),t=o(),n={clint_v0:e.formatMessage({defaultMessage:"Your vision for the future of AI",id:"FplJD/qiCU"})};return t?n[t]:""}},0x6f86c139:(e,t,n)=>{n.d(t,{P:()=>c,U:()=>d});var a=n(0x12c9046cd),r=n(0x14de19ae8),s=n(0x17e725145),i=n(0xfc89b4a4),l=n(0x1ab0d1ca1),o=n(0x6d73dff2);let u={interview:(e,t)=>["interviews",e,t]};function c(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,o.Nu)(),{activeOrganization:n,account:s}=(0,r.YL)(),i=null==n?void 0:n.uuid,l=null==s?void 0:s.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/interviews/").concat(t),{queryKey:u.interview(l||"",t||""),enabled:!!(i&&l&&e&&t),meta:{noToast:!0},retry:!1,refetchOnMount:!1,staleTime:1/0})}function d(e){let t=(0,o.Nu)(),n=function(){let e=(0,l.A)(),{activeOrganization:t,account:n}=(0,r.YL)(),o=null==t?void 0:t.uuid,c=null==n?void 0:n.uuid,d=(0,s.useQueryClient)(),f=(0,a.L2)(e=>"/api/organizations/".concat(o,"/interviews/").concat(e.interviewType),"POST",{transformVariables:e=>{let{interviewType:t,...n}=e;return n},onSuccess:(e,t)=>{d.setQueryData(u.interview(c||"",t.interviewType),e)},meta:{noToast:!0}});return(0,i.useCallback)((t,n)=>f.mutateAsync({interviewType:t,use_conversation:null==n?void 0:n.useConversation,locale:e.locale}),[f,e.locale])}(),c=function(){let{activeOrganization:e,account:t}=(0,r.YL)(),n=null==e?void 0:e.uuid,l=null==t?void 0:t.uuid,o=(0,s.useQueryClient)(),c=(0,a.L2)(e=>"/api/organizations/".concat(n,"/interviews/").concat(e.interviewType,"/status"),"PUT",{transformVariables:e=>{let{interviewType:t,...n}=e;return n},onSuccess:(e,t)=>{o.setQueryData(u.interview(l||"",t.interviewType),e)},meta:{noToast:!0}});return(0,i.useCallback)((e,t)=>c.mutateAsync({interviewType:e,status:t}),[c])}(),d=(0,i.useCallback)(async a=>{if(t)return n(t,{sessionId:a,useConversation:null==e?void 0:e.useConversation})},[n,t,null==e?void 0:e.useConversation]);return{startInterview:d,dismissInterview:(0,i.useCallback)(async()=>{if(t)return c(t,"dismissed")},[c,t]),completeInterview:(0,i.useCallback)(async()=>{if(t)return c(t,"completed")},[c,t])}}},0x90b81730:(e,t,n)=>{n.d(t,{V:()=>o});var a=n(0xf32c56dd),r=n(0x9845e38c),s=n(0xfc89b4a4),i=n(0x1fc7d761),l=n(0x17e7bc007);function o(e,t,n,o){let u=(0,s.useRef)(0),c=(0,l.Gu)(),{clearAllFeatures:d}=(0,i.Bk)(),{track:f}=(0,a.st)();(0,s.useLayoutEffect)(()=>{if(!n){let n=l.oz.getState().pathUuidsByConversation[e]||[],s=n.length,i=t.length,d=u.current;if(d>0&&o<d){var a;let l={conversation_uuid:e,prev_tree_count:d,new_tree_count:o,tree_lost_count:d-o,current_path_count:s,new_path_count:i,current_last_uuid:n[n.length-1],new_last_uuid:null==(a=t[t.length-1])?void 0:a.uuid};r.v.warn(r.u.CHAT_COMPLETION,"message_store_sync_loss",l),f({event_key:"claudeai.chat.sync_message_loss",...l})}u.current=o,c(e,t)}return()=>{d()}},[e,t,n,o,c,d,f])}},0x980c4672:(e,t,n)=>{n.d(t,{Interview:()=>G});var a=n(0x22102fd88),r=n(0x1a1f6dda6),s=n(0x160045b25),i=n(0x18c2bb2d),l=n(0xfc89b4a4),o=n(0xc2b1c121),u=n(0x6f86c139),c=n(0x6d73dff2),d=n(0x140558f4d),f=n(0x19c88845),m=n(0x225bae024),v=n(0x1b03847fb),x=n(0x38e6572),g=n(0x2092313da);let p=e=>{let{endConversation:t,disabled:n,interviewRecord:r,hasStartedInterview:s}=e,[i,o]=(0,l.useState)(!1),u=(0,l.useCallback)(()=>{o(!1)},[]),c=(0,l.useCallback)(()=>{o(!0)},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.ms,{align:"end",trigger:(0,a.jsx)(m.$,{variant:"ghost",size:"icon_sm",className:"ml-auto",disabled:n,children:(0,a.jsx)(f.DotsHorizontal,{})}),children:(0,a.jsx)(v.tJ,{onClick:c,disabled:n||(null==r?void 0:r.status)==="completed"||!s,danger:!0,children:(0,a.jsx)(x.A,{defaultMessage:"End conversation",id:"aiFCG6E2RG"})})}),(0,a.jsx)(g.q,{isOpen:i,onClose:u,onEndConversation:t})]})};var h=n(0xe9199f05),b=n(0x1bd011104),y=n(0x1ab0d1ca1);let w=(0,l.memo)(e=>{let{ref:t}=e;return(0,a.jsx)("div",{ref:t,className:"h-px w-full"})});w.displayName="Sentinel";let _=e=>{let{autoScrollRef:t,containerRef:n,sentinelElement:s,onProgrammaticScrollRef:i}=e,o=(0,y.A)(),[u,c]=(0,l.useState)(!1),d=(0,l.useRef)(null),v=(0,l.useRef)(!1),x=(0,l.useCallback)(()=>{d.current&&clearTimeout(d.current),v.current=!0,c(!1),d.current=setTimeout(()=>{v.current=!1},300)},[]);(0,l.useLayoutEffect)(()=>(i.current=x,()=>{i.current=null}),[i,x]),(0,l.useLayoutEffect)(()=>{if(!s)return;let e=new IntersectionObserver(e=>{let[t]=e;v.current||c(!t.isIntersecting)},{root:n.current,threshold:.01,rootMargin:"0px 0px 100px 0px"});return e.observe(s),()=>{e.disconnect()}},[s,n]);let g=(0,l.useCallback)(()=>{var e;x(),null==(e=t.current)||e.scrollToBottom("smooth")},[t,x]);return(0,l.useLayoutEffect)(()=>()=>{d.current&&(clearTimeout(d.current),d.current=null),v.current=!1},[]),(0,a.jsx)("div",{className:(0,r.A)("sticky bottom-9 z-10",u?"opacity-100":"opacity-0"),children:(0,a.jsx)(m.$,{variant:"secondary",size:"icon",option:"rounded",onClick:g,className:"!bg-bg-100 hover:!bg-bg-300 absolute left-1/2 -translate-x-1/2 shadow-md z-10","aria-label":o.formatMessage({defaultMessage:"Scroll to bottom",id:"p4l9m92DsT"}),children:(0,a.jsx)(f.ArrowDown,{})})})};var j=n(7611305),k=n(0x8f813b9c);let C=[(0,a.jsx)(x.A,{id:"QrZMdiKa7h",defaultMessage:"Thinking..."},"QrZMdiKa7h"),(0,a.jsx)(x.A,{id:"JKbbmmrW33",defaultMessage:"Pondering..."},"JKbbmmrW33"),(0,a.jsx)(x.A,{id:"TvfUJeEeqK",defaultMessage:"Reflecting..."},"TvfUJeEeqK"),(0,a.jsx)(x.A,{id:"j97FqneaDa",defaultMessage:"Ruminating..."},"j97FqneaDa")];function M(e){return e[Math.floor(Math.random()*e.length)]}function N(){let[e,t]=(0,l.useState)(()=>M(C));return(0,j.A)(()=>{t(M(C))},e=>{let t=[3e3,4e3,5e3];return e<t.length?t[e]:6e3}),(0,a.jsx)(k.N,{speed:2,children:e})}var S=n(0x21870d616),A=n(0xcaa21d58);let I=(0,l.memo)(e=>{let{type:t,size:n=96,animated:r=!1}=e;switch(t){case"node-bubble":if(!r)return(0,a.jsx)(S.NodeBubble,{size:"small"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.default,{alt:"Node bubble",src:"/pictograms/animated/NodeBubble/OnLight.gif",className:"dark:hidden",width:n,height:n}),(0,a.jsx)(A.default,{alt:"Node bubble",src:"/pictograms/animated/NodeBubble/OnDark.gif",className:"hidden dark:block",width:n,height:n})]});case"object-flowers":if(!r)return(0,a.jsx)(S.ObjectFlowers,{});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.default,{alt:"Flowers",src:"/pictograms/animated/ObjectFlowers/OnLight.gif",className:"dark:hidden",width:n,height:n}),(0,a.jsx)(A.default,{alt:"Flowers",src:"/pictograms/animated/ObjectFlowers/OnDark.gif",className:"hidden dark:block",width:n,height:n})]});default:return null}});var E=n(0xbca8e388),T=n(0x185cf2deb);let R=e=>{let{interviewMessages:t,isStreaming:n,isStartingInterview:r,endConversation:i,autoScrollRef:o,hasInterviewEnded:u,step:c,onNext:d,fullPage:f,onFullChatTitleVisibilityChange:m,assistantState:v,isConnecting:x}=e,g=(0,l.useRef)({lastAssistantMessage:(0,l.useRef)(null),lastHumanMessage:(0,l.useRef)(null),extras:(0,l.useRef)(null),extraSpace:(0,l.useRef)(null)}).current,p=(0,l.useRef)(null),y=(0,l.useRef)(null),j=(0,l.useRef)(null),[k,C]=(0,l.useState)(!!f);(0,l.useLayoutEffect)(()=>{let e=p.current,t=j.current;if(!e||!t)return;let n=new IntersectionObserver(e=>{let[t]=e;C(t.isIntersecting)},{root:e});return n.observe(t),()=>n.disconnect()},[]),(0,l.useLayoutEffect)(()=>{m(k)},[k,m]);let{scrollToBottomCallbackRef:M,animatedContainerRef:N}=(e=>{let{messageCount:t,autoScrollRef:n,fullPage:a}=e,r=(0,l.useRef)(-1),s=(0,l.useRef)(null),i=(0,l.useRef)(!0);(0,l.useLayoutEffect)(()=>{let e=r.current!==t;if(a&&i.current&&e){i.current=!1,r.current=t;return}if(e){var l,o;null==(l=s.current)||l.call(s),null==(o=n.current)||o.scrollToBottom("smooth")}r.current=t},[t,n,a]);let[o,u]=(0,h.l)(),c=(0,l.useRef)(!1);return(0,l.useLayoutEffect)(()=>{var e,t;if(c.current||a&&-1===r.current)return;c.current=!0,null==(e=n.current)||e.scrollToBottom("instant"),null==(t=s.current)||t.call(s);let i=o.current;i&&(0,b.c)(()=>u(i,{opacity:1},{duration:.2}),500)},[u,o,n,a,r]),{scrollToBottomCallbackRef:s,animatedContainerRef:o}})({autoScrollRef:o,messageCount:t.length,fullPage:f});return(0,l.useEffect)(()=>{if(u&&"post-interview"!==c){var e;null==(e=o.current)||e.setPinToBottom(!0),requestAnimationFrame(()=>{var e,t;null==(e=M.current)||e.call(M),null==(t=o.current)||t.scrollToBottom("smooth")}),(0,b.c)(()=>d(),300)}},[u,c,o,M,d]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T.Z,{ref:o,containerRef:p,parentClassName:"flex-1 relative overflow-x-visible u-hidden-scrollbar",pinToBottomConfig:{disabled:!1,initialValue:!1},children:(0,a.jsxs)("div",{className:"relative flex flex-col pt-8 px-3 space-y-7 opacity-0",ref:N,children:[(0,a.jsxs)(s.N,{mode:"popLayout",children:[(0,a.jsx)(P,{fullChatTitleRef:j,isConnecting:x,endConversation:i,isStartingInterview:r,isStreaming:n,hasStartedInterview:t.length>0},"initial-message"),(0,a.jsx)(L,{interviewMessages:t,assistantState:v,scrollRefs:g},"interview-messages")]}),(0,a.jsx)(w,{ref:y}),!u&&t.length>0&&(0,a.jsx)(_,{autoScrollRef:o,containerRef:p,sentinelElement:y.current,onProgrammaticScrollRef:M})]})})})},P=(0,l.memo)(e=>{let{fullChatTitleRef:t,isConnecting:n,isStreaming:r,isStartingInterview:o,endConversation:d,hasStartedInterview:f}=e,{data:m}=(0,u.P)(),v=(0,c.JV)(),g=(0,l.useMemo)(()=>({uuid:"initial-interviewer-msg",sender:"assistant",content:[{type:"text",text:v}],created_at:new Date().toISOString(),attachments:[],files:[],files_v2:[],sync_sources:[],index:-1}),[v]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.P.div,{className:"flex items-center gap-4 flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeIn",delay:.25},ref:t,children:[(0,a.jsx)(I,{type:"node-bubble"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)(s.N,{mode:"wait",children:o||n?(0,a.jsx)(i.P.p,{className:"font-base-bold text-text-500",exit:{opacity:0},transition:{duration:.3,ease:"easeIn"},children:(0,a.jsx)(k.N,{speed:2,children:(0,a.jsx)(x.A,{defaultMessage:"Starting conversation on...",id:"bXLLomFyZf"})})},"connecting"):(0,a.jsx)(i.P.p,{className:"font-base-bold text-text-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeOut"},children:(0,a.jsx)(x.A,{defaultMessage:"A conversation on",id:"x4h6AxBMKh"})},"connected")})}),(0,a.jsx)("p",{className:"font-xl-bold",children:(0,a.jsx)(x.A,{defaultMessage:"Your vision for the future of AI",id:"FplJD/qiCU"})})]}),f&&(0,a.jsx)(p,{endConversation:d,disabled:n||r||o,interviewRecord:m,hasStartedInterview:!0})]},"full-chat-title"),!o&&(0,a.jsx)(i.P.div,{children:(0,a.jsx)(F,{message:g})})]})});P.displayName="InitialMessage";let F=(0,l.memo)(e=>{var t,n,s;let{message:i}=e;if("human"===i.sender)return(0,a.jsx)("div",{className:"px-4 py-3 rounded-lg bg-bg-300 font-ui w-fit",children:null==(s=i.content)?void 0:s.map((e,t)=>"text"!==e.type?null:(0,a.jsx)("div",{children:e.text},t))});let l=null==(t=i.content)?void 0:t.some(e=>"tool_use"===e.type&&e.name.includes("end_conversation"));return(0,a.jsx)("div",{className:(0,r.A)(l&&"pb-10"),children:null==(n=i.content)?void 0:n.map((e,t)=>"text"!==e.type?null:(0,a.jsx)(E.fP,{text:e.text,className:"[&>*]:font-ui"},t))})}),L=e=>{let{interviewMessages:t,assistantState:n,scrollRefs:l}=e;return(0,a.jsxs)(s.N,{children:[t.map((e,n)=>{var o;let u=n===t.length-1,c="human"===e.sender&&n===t.findLastIndex(e=>"human"===e.sender)?l.lastHumanMessage:u?l.lastAssistantMessage:void 0,d="assistant"===e.sender;return(0,a.jsx)(i.P.div,{ref:c,className:(0,r.A)("human"===e.sender&&"self-end"),initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)(s.N,{mode:"wait",children:d&&(null==(o=e.content)?void 0:o.length)===0?(0,a.jsx)(i.P.div,{ref:l.extras,initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)(N,{})},"thinking"):(0,a.jsx)(F,{message:e})})},n)}),"working"===n&&(0,a.jsx)(i.P.div,{ref:l.extras,className:"mb-2",initial:{opacity:0},animate:{opacity:1},children:(0,a.jsx)(N,{})},"thinking")]})};var O=n(0x22fc8d729);let D=(0,l.memo)(()=>(0,a.jsx)("div",{className:"flex flex-col flex-1 items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center bg-bg-100 gap-2.5 text-center rounded-2xl border border-border-300 px-5 py-7 max-w-[340px]",children:[(0,a.jsx)(I,{type:"object-flowers",animated:!0}),(0,a.jsx)("h1",{className:"font-xl-bold",children:(0,a.jsx)(x.A,{defaultMessage:"Thanks for sharing your thoughts",id:"oqPq7xQgyG"})}),(0,a.jsx)("p",{className:"text-text-300",children:(0,a.jsx)(x.A,{defaultMessage:"Return to your chats or <link>learn more about our research</link>.",id:"gwg9H7kFgp",values:{link:e=>(0,a.jsx)(O.Y,{href:"https://www.anthropic.com/research/anthropic-interviewer",target:"_blank",children:e})}})})]})}));D.displayName="CompletedInterview";var U=n(0x246846ae8),Y=n(0x23a446eb7);let B=e=>{let{step:t,onNext:n,sendMessage:r,messageCount:s,isConnecting:i,isStartingInterview:l,hasInterviewEnded:o,assistantState:u,isStreaming:c}=e;return"pre-interview"===t?(0,a.jsx)(Q,{onNext:n},"intro-footer"):(0,a.jsx)(z,{sendMessage:r,messageCount:s,isConnecting:i,isStreaming:c,isStartingInterview:l,hasInterviewEnded:o,assistantState:u,step:t},"input-footer")},Q=(0,l.memo)(e=>{let{onNext:t}=e,n=(0,l.useCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),t())},[t]);return(0,l.useEffect)(()=>(window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)),[n]),(0,a.jsxs)(i.P.div,{className:"flex flex-col gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeIn",delay:.5},children:[(0,a.jsx)("div",{className:"border border-0.5 border-border-300 p-4 rounded-lg font-small text-text-500",children:(0,a.jsx)(x.A,{defaultMessage:"By participating, you agree that we may use your responses to conduct research and improve our models and services in accordance with how we use Feedback data in our <link_one>Privacy Policy</link_one>. We may also include anonymized responses in published findings. <link_two>Learn more</link_two>.",id:"DoMuRciwev",values:{link_one:e=>(0,a.jsx)(O.Y,{href:"https://www.anthropic.com/legal/privacy",target:"_blank",children:e}),link_two:e=>(0,a.jsx)(O.Y,{href:"https://privacy.claude.com/en/articles/12996960-how-does-anthropic-interviewer-collect-and-use-my-data/",target:"_blank",children:e})}})}),(0,a.jsxs)("button",{onClick:t,className:"font-base md:font-large flex items-center justify-between bg-bg-200 border border-border-300 rounded-xl py-3.5 pl-5 pr-4 text-ui font-medium w-full hover:bg-bg-300 transition-colors",children:[(0,a.jsx)(x.A,{defaultMessage:"Press enter to get started",id:"EtWnHVE/at"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-text-000 rounded-full",children:(0,a.jsx)(f.ArrowUp,{className:"text-bg-000"})})]})]},"intro-footer")});Q.displayName="IntroFooter";let q=(0,a.jsx)("div",{className:"absolute -top-16 left-0 right-0 h-20 pointer-events-none z-[-1]",style:{background:"linear-gradient(0deg, hsl(var(--bg-000) / 1.00) 0%, hsl(var(--bg-000) / 0.96) 14%, hsl(var(--bg-000) / 0.84) 29%, hsl(var(--bg-000) / 0.63) 43%, hsl(var(--bg-000) / 0.37) 57%, hsl(var(--bg-000) / 0.16) 71%, hsl(var(--bg-000) / 0.04) 86%, hsl(var(--bg-000) / 0.00) 100%)"}}),z=(0,l.memo)(e=>{let{sendMessage:t,messageCount:n,isConnecting:r,isStreaming:u,hasInterviewEnded:c,assistantState:d,step:v,isStartingInterview:x}=e,g=(0,y.A)(),{trackMessageSent:p}=(0,o.J)(),[h,b]=(0,l.useState)(""),w=(0,l.useRef)(null),_=(0,l.useCallback)(()=>{"working"!==d&&h&&h.trim().length>0&&(p(),t(h),b(""),requestAnimationFrame(()=>{var e;null==(e=w.current)||e.focus()}))},[h,t,d,p]),j=(0,l.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},[_]),k=(0,l.useMemo)(()=>0===n?g.formatMessage({defaultMessage:"Ready to chat? Start typing here...",id:"6Qa1ogVU9x"}):g.formatMessage({defaultMessage:"Share your thoughts...",id:"2uUh88SA9g"}),[g,n]);return(0,l.useEffect)(()=>{let e=e=>{if(document.activeElement!==w.current&&1===e.key.length&&!e.ctrlKey&&!e.metaKey){var t,n,a,r;e.preventDefault(),null==(t=w.current)||t.focus();let s=(null==(n=w.current)?void 0:n.value)||"",i=(null==(a=w.current)?void 0:a.selectionStart)||0,l=(null==(r=w.current)?void 0:r.selectionEnd)||0;b(s.substring(0,i)+e.key+s.substring(l)),requestAnimationFrame(()=>{if(w.current){let e=i+1;w.current.selectionStart=e,w.current.selectionEnd=e}})}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,Y.ys)({shouldFocus:!0,target:w,delayMs:300}),(0,a.jsxs)("div",{className:"w-full sticky bottom-0 h-fit",children:[(0,a.jsx)(s.N,{children:"interview"===v&&(0,a.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,position:"absolute",width:"100%",bottom:0},children:[q,(0,a.jsx)(U.fs,{ref:w,value:h,onValueChange:b,placeholder:k,minRows:1,className:"max-h-[150px] pl-5 pr-16 py-5 !rounded-2xl leading-6",onKeyDown:j,disabled:x||r||c}),(0,a.jsx)(m.$,{"aria-label":g.formatMessage({defaultMessage:"Send",id:"9WRlF4R2gm"}),size:"icon_sm",option:"rounded",className:"!absolute bottom-[15px] right-[17px] z-10",disabled:x||r||u||c||"working"===d||!h||0===h.trim().length,onClick:_,children:(0,a.jsx)(f.ArrowUp,{})})]})}),(0,a.jsx)(i.P.div,{layout:!0,transition:{duration:.5,ease:[.42,0,.23,.98]},children:(0,a.jsx)(s.N,{mode:"sync",children:"post-interview"===v&&(0,a.jsx)(K,{})})})]})});z.displayName="Input";let K=(0,l.memo)(()=>(0,a.jsxs)("div",{className:"w-full flex flex-col px-5 py-[22px] bg-bg-200 gap-2.5 rounded-xl border border-border-300",children:[(0,a.jsx)(I,{type:"object-flowers",animated:!0}),(0,a.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.35,ease:"easeIn"}},children:[(0,a.jsx)("p",{className:"font-xl-bold",children:(0,a.jsx)(x.A,{defaultMessage:"Thanks for sharing your thoughts",id:"oqPq7xQgyG"})}),(0,a.jsx)("p",{className:"text-text-300",children:(0,a.jsx)(x.A,{defaultMessage:"Return to your chats or <link>learn more about our research</link>.",id:"gwg9H7kFgp",values:{link:e=>(0,a.jsx)(O.Y,{href:"https://www.anthropic.com/research/anthropic-interviewer",target:"_blank",className:"underline",children:e})}})})]})]}));K.displayName="CompletedInterview";let V=(0,l.memo)(()=>(0,a.jsx)("div",{className:"flex flex-col flex-1 items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center bg-bg-100 gap-10 text-center rounded-2xl border border-border-300 px-5 py-7 max-w-[340px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,a.jsx)(I,{type:"node-bubble",animated:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h1",{className:"font-xl-bold",children:(0,a.jsx)(x.A,{defaultMessage:"Thanks for your interest",id:"1wfEnYV3vH"})}),(0,a.jsx)("p",{className:"text-text-300",children:(0,a.jsx)(x.A,{defaultMessage:"This experience is only available for accounts older than two weeks on a Free, Pro, or Max plan.",id:"2we6v7mPUh"})}),(0,a.jsx)("p",{className:"font-base text-text-500",children:(0,a.jsx)(x.A,{defaultMessage:"On a Team or Enterprise plan? Switch to your personal account.",id:"9kZoaKyo7E"})}),(0,a.jsx)("p",{children:(0,a.jsx)(x.A,{defaultMessage:"<link>Learn more</link>",id:"MgreUxjVVS",values:{link:e=>(0,a.jsx)(O.Y,{href:"https://www.anthropic.com/research/anthropic-interviewer",target:"_blank",children:e})}})})]})]}),(0,a.jsx)(m.$,{href:"/new",children:(0,a.jsx)(x.A,{defaultMessage:"Go to Claude.ai",id:"DT+DRnG35R"})})]})}));V.displayName="IneligibleInterview";let J=(0,l.memo)(()=>(0,a.jsx)(i.P.div,{className:"flex flex-col flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:"easeIn",delay:.35},children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 mt-[80px] mb-[40px] md:mt-auto md:mb-[85px]",children:[(0,a.jsx)(I,{type:"node-bubble",animated:!0}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center text-center px-2 md:px-0",children:[(0,a.jsx)("h1",{className:"font-large-bold md:font-xl-bold",children:(0,a.jsx)(x.A,{defaultMessage:"Want to shape the future of AI?",id:"mhMsqcBhAt"})}),(0,a.jsx)("h2",{className:"font-small md:font-large text-text-300 max-w-[35ch]",children:(0,a.jsx)(x.A,{defaultMessage:"Share your thoughts via our AI interviewer. Your insights help us understand how people experience AI.",id:"dmlCWlFrpO"})}),(0,a.jsx)(O.Y,{href:"https://www.anthropic.com/research/anthropic-interviewer",target:"_blank",className:"underline font-small md:font-large text-text-300",children:(0,a.jsx)(x.A,{defaultMessage:"Learn more",id:"TdTXXf940t"})})]})]})}));J.displayName="Intro";var H=n(0x1cc2a1724);let G=e=>{let{parentClassName:t,onStartInterview:n,isEligible:i,fullPage:c,header:f}=e,{trackInterviewStarted:m}=(0,o.J)(),{data:v}=(0,u.P)(i),[x,g]=(0,l.useState)((0,H.Ip)(v)),p=(0,l.useCallback)(()=>{g("pre-interview")},[g]),{startInterview:h,isStartingInterview:b}=(0,d.l5)({onError:p}),{sendMessage:y,isStreaming:w}=(0,d.YP)(),{status:_,isConnecting:j,assistantState:k,hasInterviewEnded:C}=(0,d.rV)(),M=(0,d.T0)(),N=M.length,S=(0,l.useRef)(null),A=(0,l.useRef)(null),[I,E]=(0,l.useState)(!0),T=(0,l.useCallback)(()=>{"pre-interview"===x?(m(),g("interview"),h(),null==n||n()):"interview"===x&&g("post-interview")},[h,x,n,m]),P=(0,d.mE)(),F=(0,l.useCallback)(async()=>{g("post-interview"),await P()},[P]),L="post-interview"===x&&0===N,O=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{"completed"!==_&&C&&!O.current&&(O.current=!0,P())},[C,_,P]),(0,a.jsxs)("div",{className:(0,r.A)("flex flex-col p-3 gap-2","min-h-[628px] max-h-[730px] h-full w-[calc(100vw-40px)] md:w-[666px] md:h-[730px]",t),ref:S,children:[f,i?L?(0,a.jsx)(D,{}):(0,a.jsxs)("div",{className:"flex flex-col flex-1 rounded-2xl p-2 sm:p-5 pt-0 overflow-y-hidden relative border-0.5 border-border-400 bg-bg-000",style:{boxShadow:"0 1px 2px 0 hsl(var(--always-black)/5%)"},children:[(0,a.jsxs)(s.N,{children:["pre-interview"===x&&(0,a.jsx)(J,{},"intro"),"pre-interview"!==x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W,{isVisible:!I&&N>0,endConversation:F,isConnecting:j,isStartingInterview:b,interviewRecord:v,hasStartedInterview:N>0}),(0,a.jsx)(R,{interviewMessages:M,assistantState:k,endConversation:F,isConnecting:j,isStreaming:w,isStartingInterview:b,autoScrollRef:A,hasInterviewEnded:C,step:x,onNext:T,fullPage:c,onFullChatTitleVisibilityChange:E},"chat")]})]}),(0,a.jsx)(B,{step:x,onNext:T,sendMessage:y,messageCount:N,hasInterviewEnded:C,isConnecting:j,isStartingInterview:b,assistantState:k,isStreaming:w})]}):(0,a.jsx)(V,{})]})},W=(0,l.memo)(e=>{let{isVisible:t,endConversation:n,isConnecting:l,isStartingInterview:o,interviewRecord:u,hasStartedInterview:d}=e,f=(0,c.B$)();return f?(0,a.jsx)(s.N,{children:t&&(0,a.jsxs)(i.P.div,{initial:{paddingTop:0,paddingBottom:0,height:0},animate:{paddingTop:"6px",paddingBottom:"6px",height:40},exit:{paddingTop:0,paddingBottom:0,height:0},transition:{duration:.05,ease:"easeOut"},className:(0,r.A)("flex items-center font-base-bold bg-bg-100 border-b-0.5 border-border-300","absolute top-0 z-20 pl-4 pr-3 w-full inset-x-0"),children:[f,(0,a.jsx)(p,{endConversation:n,disabled:l||o,interviewRecord:u,hasStartedInterview:d})]},"sticky-heading")}):null});W.displayName="MiniChatTitle"},0xc2b1c121:(e,t,n)=>{n.d(t,{J:()=>l});var a=n(0xf32c56dd),r=n(0x4d348f95),s=n(0xfc89b4a4),i=n(0x6d73dff2);function l(){let e=(0,r.usePathname)(),t=(0,i.Nu)(),n=(0,a.st)(),l=(0,s.useCallback)(a=>{n.track({event_key:"interview.modal.opened",path:e,interview_type:t,...a})},[n,e,t]),o=(0,s.useCallback)(()=>{n.track({event_key:"interview.started",path:e,interview_type:t})},[n,e,t]),u=(0,s.useCallback)(()=>{n.track({event_key:"interview.message.sent",path:e,interview_type:t})},[n,e,t]),c=(0,s.useCallback)(a=>{let{start_time:r,...s}=a,i=new Date(r).getTime(),l=Math.round((Date.now()-i)/1e3);n.track({event_key:"interview.completed",interview_type:t,duration_seconds:l,path:e,...s})},[n,e,t]),d=(0,s.useCallback)(()=>{n.track({event_key:"interview.dismissed",path:e})},[n,e]),f=(0,s.useCallback)(a=>{n.track({event_key:"interview.modal.closed",path:e,interview_type:t,...a})},[n,e,t]);return{trackModalOpened:l,trackInterviewStarted:o,trackMessageSent:u,trackInterviewCompleted:c,trackInterviewDismissed:d,trackModalClosed:f,trackInterviewStartFailed:(0,s.useCallback)(a=>{n.track({event_key:"interview.start.failed",interview_type:t,path:e,...a})},[n,e,t]),trackInterviewEndFailed:(0,s.useCallback)(a=>{n.track({event_key:"interview.end.failed",interview_type:t,path:e,...a})},[n,e,t])}}},0x140558f4d:(e,t,n)=>{n.d(t,{T0:()=>m,X0:()=>c,YP:()=>f,l5:()=>d,mE:()=>u,rV:()=>v});var a=n(0x139b5e710),r=n(0xfc89b4a4),s=n(0x1ab0d1ca1),i=n(0x17e7bc007),l=n(0x12bfc937),o=n(0x6f86c139);let u=()=>{let{addError:e}=(0,a.Yf)(),t=(0,s.A)(),{completeInterview:n}=(0,o.U)({useConversation:!0});return(0,r.useCallback)(async()=>{try{await n()}catch(n){e(t.formatMessage({defaultMessage:"Failed to end interview. You can try again.",id:"t1le2k9Ewd"}),{error:n,errorContext:{tags:{source:"interview_end"}},messageForLogging:"Failed to end interview. You can try again."})}},[n,e,t])},c=()=>{let{addError:e}=(0,a.Yf)(),t=(0,s.A)(),{dismissInterview:n}=(0,o.U)({useConversation:!0});return(0,r.useCallback)(async()=>{try{await n()}catch(n){e(t.formatMessage({defaultMessage:"Failed to dismiss interview. You can try again.",id:"IgGRaTAoH/"}),{error:n,errorContext:{tags:{source:"interview_dismiss"}},messageForLogging:"Failed to dismiss interview. You can try again."})}},[n,e,t])},d=e=>{let{onError:t}=e,n=(0,s.A)(),{addError:i}=(0,a.Yf)(),[l,u]=(0,r.useTransition)(),{startInterview:c}=(0,o.U)({useConversation:!0});return{startInterview:(0,r.useCallback)(()=>{u(async()=>{try{await c()}catch(e){i(n.formatMessage({defaultMessage:"Failed to start interview. You can try again.",id:"l7wVZLchzn"}),{error:e,errorContext:{tags:{source:"interview_start"}},messageForLogging:"Failed to start interview. You can try again."}),null==t||t(e)}})},[c,i,t,n]),isStartingInterview:l}},f=()=>{let e=(0,s.A)(),{addError:t}=(0,a.Yf)(),{data:n}=(0,o.P)(),u=null==n?void 0:n.conversation_uuid,c=(0,r.useCallback)((e,t,n)=>{i.oz.getState().updateStreamingMessage(e,t,n)},[]),{runStream:d,isStreaming:f}=(0,l.G)(u||"",void 0,(0,r.useCallback)(()=>[],[]),void 0,c,void 0,void 0),m=(0,i._Q)(u||"");return{sendMessage:(0,r.useCallback)(async n=>{if(!u)return void t(e.formatMessage({defaultMessage:"Interview not started.",id:"d43is5xb6m"}),{errorContext:{tags:{source:"interview_send_message"}},messageForLogging:"Interview not started."});try{await d({prompt:n,files:[],attachments:[],syncSources:[],parent_message_uuid:m||void 0,skipOptimisticUpdateOnStreamComplete:!0})}catch(n){t(e.formatMessage({defaultMessage:"Failed to send message. You can try again.",id:"L74XIWqMmc"}),{error:n,errorContext:{tags:{source:"interview_send_message"}},messageForLogging:"Failed to send message. You can try again."})}},[u,d,t,m,e]),isStreaming:f}},m=()=>{let{data:e}=(0,o.P)(),t=null==e?void 0:e.conversation_uuid;return(0,i.ot)(t||"")},v=()=>{let{data:e}=(0,o.P)(),t=m();return{hasInterviewEnded:(0,r.useMemo)(()=>(null==e?void 0:e.status)==="completed"||!!t[t.length-1]&&t.some(e=>{var t;return"assistant"===e.sender&&(null==(t=e.content)?void 0:t.some(e=>"tool_use"===e.type&&e.name.includes("end_conversation")))}),[t,null==e?void 0:e.status]),status:null==e?void 0:e.status,isConnecting:!1,assistantState:"idle"}}},0x1cc2a1724:(e,t,n)=>{n.d(t,{Ip:()=>i,gq:()=>r,oG:()=>s});var a=n(0xc6536c20);function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(null==e?void 0:e.created_at)||!n&&((null==t?void 0:t.raven_type)==="enterprise"||(null==t?void 0:t.raven_type)==="team"))return!1;let r=a.c9.fromISO(e.created_at);return a.c9.now().diff(r,"days").days>=14}function s(e){return!!e&&new Date(e+"T23:59:59Z")<new Date}let i=e=>e?"completed"===e.status?"post-interview":"interview":"pre-interview"},0x20885504e:(e,t,n)=>{n.d(t,{N:()=>l});var a=n(0x14de19ae8),r=n(0x22062498b),s=n(0xac309a83),i=n(0xfc89b4a4);function l(){let{account:e}=(0,a.YL)(),t=(0,s.fS)("claudeai_use_cached_stream");return(0,i.useMemo)(()=>{if(!(0,r.B)(e))return t;let n=new URLSearchParams(window.location.search).get("cached_stream");if(null!==n){if("true"===n||"1"===n)return!0;if("false"===n||"0"===n)return!1}return t},[e,t])}},0x2092313da:(e,t,n)=>{n.d(t,{q:()=>i});var a=n(0x22102fd88),r=n(0x11c7a82c2),s=n(0x1ab0d1ca1);let i=e=>{let{isOpen:t,onClose:n,onEndConversation:i}=e,l=(0,s.A)();return(0,a.jsx)(r.R,{isOpen:t,onClose:n,onConfirm:i,confirmText:l.formatMessage({defaultMessage:"End interview",id:"MoJ/J/7Ezq"}),variant:"danger",size:"md",title:l.formatMessage({defaultMessage:"Ready to end the interview?",id:"4i2vSAKww3"}),message:l.formatMessage({defaultMessage:"If you end the interview now, you canâ€™t restart later. Keep chatting if you have more thoughts to share! Your insights so far are saved.",id:"pyLRHSiinX"})})}},0x2349cee20:(e,t,n)=>{n.d(t,{G:()=>d});var a=n(0x628a9a0b),r=n(0x14de19ae8),s=n(0x49fac030),i=n(0x17e725145),l=n(0xfc89b4a4),o=n(0x20805e624),u=n(0x10e9ea2cc);function c(e){var t,n;return"text"===e.type?!!(null==(t=e.text)?void 0:t.trim()):"thinking"===e.type?"thinking"in e&&!!(null==(n=e.thinking)?void 0:n.length):"tool_use"===e.type&&"name"in e&&!!e.name}let d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=(0,i.useQueryClient)(),{activeOrganization:f}=(0,r.YL)(),m=null==f?void 0:f.uuid,v=(0,a.oF)(),x=(0,l.useRef)(void 0),g=(0,u.$)(),p=(0,l.useCallback)(async(e,t)=>{let a=[s.fC,{orgUuid:m},{uuid:e},{returnDanglingHumanMessage:n}],r=d.getQueryData(a);if(!r)throw Error("Conversation tree must be provided for append");x.current=t(r),await d.cancelQueries({queryKey:a}),d.setQueryData(a,x.current)},[d,m,n]),h=(0,l.useRef)(new Set),b=(0,l.useCallback)((a,r)=>{if(0!==r.length){if(e&&!h.current.has(a)){let t=r.find(c);t&&(h.current.add(a),e(t.type))}if(t){var i,l;t(null!=(l=null==(i=x.current)?void 0:i.uuid)?l:"",a,r);return}d.setQueryData([s.fC,{orgUuid:m},{uuid:a},{returnDanglingHumanMessage:n}],()=>{let e=x.current;if(!e)throw Error("Conversation tree must be provided for incremental completion");if(!e.current_leaf_message_uuid)throw Error("Couldn't figure out where to put completion");let t=e.messageByUuid.get(e.current_leaf_message_uuid);if(!t)throw Error("New assistant message not found");return t.content=r,{...e,created_at:new Date().toISOString()}})}},[d,m,e,t,n]);return{onStartAppend:p,onStreamCompleted:(0,l.useCallback)((e,t,n,r)=>{(null==r?void 0:r.shouldRefetch)!==!1&&(v(e,m,n),d.invalidateQueries({queryKey:["FEATURE_LIMITS",m]}));let i=x.current,l=(null==i?void 0:i.chat_messages)&&i.chat_messages.length<=2;!i||!l||i.is_temporary||(null==r?void 0:r.skipOptimisticUpdate)||(d.setQueriesData({queryKey:[s.DC,{orgUuid:m}],predicate:e=>{let{queryKey:t}=e,n=t[2];return!(null==n?void 0:n.starred)}},t=>!t||t.some(t=>t.uuid===e)?t:[{uuid:e,name:i.name,summary:i.summary,updated_at:i.updated_at,created_at:i.created_at,project_uuid:i.project_uuid,model:i.model,settings:i.settings,is_starred:!1},...t].slice(0,a.sk)),d.setQueryData([s.Ad,{orgUuid:m}],e=>{var t;return{is_first_conversation:!1,count:(null!=(t=null==e?void 0:e.count)?t:0)+1}})),t&&m&&g(t,m,e)},[d,g,m,v]),onIncrementalCompletion:b,changeDisplayedConversationPath:(0,l.useCallback)((e,t,a,r)=>{d.setQueryData([s.fC,{orgUuid:m},{uuid:e},{returnDanglingHumanMessage:n}],e=>{if(!e)throw Error("Conversation tree must be provided for changeDisplayedConversationPath");let n=(0,o.gX)(e,t,a);return n.current_leaf_message_uuid&&r&&r(n.current_leaf_message_uuid),n})},[d,m,n])}}}}]);